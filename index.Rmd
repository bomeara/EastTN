---
title: East TN information
output: html_document
params:
  sumtab: "unknown"
---

The purpose of this is to gather information on how the covid-19 pandemic is progressing in East TN. There are good sites that have info on the pandemic generally across the US and world, but Tennessee as well as local entities put out info that is not captured by these sites. 

I am mostly doing this for my own curiosity as a parent in Oak Ridge, TN; though I work in science, I don't work in epidemiology. Thus, I'm not presenting any predictions of future spread, etc. -- I'm taking published datasets and plotting them. For datasets that are presented as current conditions but do not have a history, I take a copy of them (usually every six hours) to be able to plot how they change over time.

```{r, echo=FALSE, message=FALSE, warning=FALSE}
source("_packages.R")
source("R/functions.R")
tar_load(hospital_knox)
tar_load(daily_focal)
tar_load(tn_death_predictions)
tar_load(tn_death_history)
counties_in_hospital_region <- FocalCountiesEastTN()
last_hospital_update <- max(hospital_knox$Date)
```

As of the last time the data were updated, **the 19 regional hospitals around Knoxville had only `r tail(subset(hospital_knox, Resource=="ICU Beds")$Available,1)` ICU beds available of `r tail(subset(hospital_knox, Resource=="ICU Beds")$Total.Capacity,1)` total**, based on info from the [Knox County Health Department](https://covid.knoxcountytn.gov/case-count.html).

```{r, echo=FALSE, message=FALSE, warning=FALSE}
tn_death_predictions_point <- subset(tn_death_predictions, type=="point")

tn_death_prediction_organized <- data.frame(Date=tn_death_predictions_point$target_end_date,Expected_Deaths=tn_death_predictions_point$value, Range=rep(NA, nrow(tn_death_predictions_point)))
for (i in sequence(nrow(tn_death_prediction_organized))) {
	tn_death_prediction_organized$Range[i] <- paste0(subset(tn_death_predictions, quantile==0.025 & target_end_date== tn_death_prediction_organized$Date[i])$value, "-", subset(tn_death_predictions, quantile==0.975 & target_end_date== tn_death_prediction_organized$Date[i])$value)
}


#knitr::kable(tn_death_prediction_organized)
```

As of `r format(as.Date(tail(tn_death_history$target_end_date,1)),format="%a, %b %d, %Y")`, `r tail(tn_death_history$value,1)` people have died from covid in Tennessee. https://covid19forecasthub.org makes predictions based on a number of models. They predict that by `r format(as.Date(tail(tn_death_prediction_organized$Date,1)),format="%b %d")` an additional `r tn_death_prediction_organized$Expected_Deaths[1]` (range `r tn_death_prediction_organized$Range[1]`) will have died from covid, with `r tn_death_prediction_organized$Expected_Deaths[2]`, `r tn_death_prediction_organized$Expected_Deaths[3]`, and `r tn_death_prediction_organized$Expected_Deaths[4]` more covid deaths in the next three weeks.

A high level overview of the pandemic in Tennessee as a whole (using Tennessee's definitions of groups):

```{r, echo=FALSE, message=FALSE, warning=FALSE, error=FALSE}
tar_load(sumtabfraction)
knitr::kable(sumtabfraction)
```